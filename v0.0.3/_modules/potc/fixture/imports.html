

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>potc.fixture.imports &mdash; potc 0.0.3 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/graphviz.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> potc
          

          
          </a>

          
            
            
              <div class="version">
                0.0.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/installation/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/quick_start/index.html">Quick Start</a></li>
</ul>
<p><span class="caption-text">API Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../api_doc/config/index.html">potc.config</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api_doc/fixture/index.html">potc.fixture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api_doc/rules/index.html">potc.rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api_doc/supports/index.html">potc.supports</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api_doc/testing/index.html">potc.testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api_doc/translate/index.html">potc.translate</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">potc</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../index.html">Module code</a> &raquo;</li>
        
      <li>potc.fixture.imports</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
    
    
  <h1>Source code for potc.fixture.imports</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">importlib</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">types</span>
<span class="kn">import</span> <span class="nn">uuid</span>
<span class="kn">from</span> <span class="nn">abc</span> <span class="kn">import</span> <span class="n">ABCMeta</span><span class="p">,</span> <span class="n">abstractmethod</span>
<span class="kn">from</span> <span class="nn">contextlib</span> <span class="kn">import</span> <span class="n">contextmanager</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Tuple</span>


<div class="viewcode-block" id="try_import_info"><a class="viewcode-back" href="../../../api_doc/fixture/imports.html#potc.fixture.imports.try_import_info">[docs]</a><span class="k">def</span> <span class="nf">try_import_info</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">alias</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Overview:</span>
<span class="sd">        Try to get an import statement from given object.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        - obj (:obj:`object`): Given object.</span>
<span class="sd">        - alias (:obj:`Optional[str]`): Alias name for import statement, \</span>
<span class="sd">            default is ``None`` which means do not alias.</span>

<span class="sd">    Returns:</span>
<span class="sd">        - import (:obj:`Tuple[str, ...]`): Import statement tuple.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; import dill</span>
<span class="sd">        &gt;&gt;&gt; try_import_info(dill)  # (&#39;import&#39;, &#39;dill&#39;)</span>
<span class="sd">        &gt;&gt;&gt;</span>
<span class="sd">        &gt;&gt;&gt; from potc import transvars</span>
<span class="sd">        &gt;&gt;&gt; try_import_info(transvars)  # (&#39;from&#39;, &#39;potc&#39;, &#39;import&#39;, &#39;transvars&#39;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">_simple</span> <span class="o">=</span> <span class="n">_raw_import_info</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="n">_segments</span> <span class="o">=</span> <span class="n">_simple</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">_simple</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;import&#39;</span><span class="p">:</span>
            <span class="n">combiner</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">i</span><span class="p">:</span> <span class="s1">&#39;.&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="o">*</span><span class="n">_segments</span><span class="p">[:</span><span class="n">i</span><span class="p">],</span> <span class="n">_segments</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]])</span>
            <span class="n">rg</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">_segments</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">combiner</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">i</span><span class="p">:</span> <span class="s1">&#39;.&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">_segments</span><span class="p">[:</span><span class="n">i</span><span class="p">])</span>
            <span class="n">rg</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">_segments</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>

        <span class="n">_simpler</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">i</span><span class="p">:</span> <span class="p">(</span><span class="n">_simple</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">combiner</span><span class="p">(</span><span class="n">i</span><span class="p">),</span> <span class="o">*</span><span class="n">_simple</span><span class="p">[</span><span class="mi">2</span><span class="p">:])</span>
        <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="n">rg</span><span class="p">:</span>
            <span class="n">_sp</span> <span class="o">=</span> <span class="n">_simpler</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">_validate_import_info</span><span class="p">(</span><span class="o">*</span><span class="n">_sp</span><span class="p">)</span> <span class="ow">is</span> <span class="n">obj</span><span class="p">:</span>
                    <span class="k">return</span> <span class="p">(</span><span class="o">*</span><span class="n">_sp</span><span class="p">,</span> <span class="o">*</span><span class="p">((</span><span class="s1">&#39;as&#39;</span><span class="p">,</span> <span class="n">alias</span><span class="p">)</span> <span class="k">if</span> <span class="n">alias</span> <span class="k">else</span> <span class="p">()))</span>
            <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">ImportError</span><span class="p">,</span> <span class="ne">AttributeError</span><span class="p">,</span> <span class="ne">ModuleNotFoundError</span><span class="p">):</span>
                <span class="k">continue</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Unable to import </span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span><span class="si">}</span><span class="s1">, validate fail.&#39;</span><span class="p">)</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">ImportError</span><span class="p">,</span> <span class="ne">AttributeError</span><span class="p">,</span> <span class="ne">ModuleNotFoundError</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Unable to import </span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span><span class="si">}</span><span class="s1">, error occurred when trying to trace.&#39;</span><span class="p">)</span></div>


<span class="k">def</span> <span class="nf">_raw_import_info</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">ModuleType</span><span class="p">):</span>
        <span class="n">_segments</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="vm">__name__</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">_segments</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;from&#39;</span><span class="p">,</span> <span class="s1">&#39;.&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">_segments</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]),</span> <span class="s1">&#39;import&#39;</span><span class="p">,</span> <span class="n">_segments</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;import&#39;</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="vm">__name__</span>
    <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s1">&#39;__module__&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s1">&#39;__name__&#39;</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;from&#39;</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="vm">__module__</span><span class="p">,</span> <span class="s1">&#39;import&#39;</span><span class="p">,</span> <span class="n">obj</span><span class="o">.</span><span class="vm">__name__</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Unable to import </span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span><span class="si">}</span><span class="s1">.&#39;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">_validate_import_info</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;from&#39;</span><span class="p">:</span>
        <span class="n">module</span> <span class="o">=</span> <span class="n">importlib</span><span class="o">.</span><span class="n">import_module</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="n">args</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
    <span class="k">elif</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;import&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">importlib</span><span class="o">.</span><span class="n">import_module</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>


<div class="viewcode-block" id="ImportStatement"><a class="viewcode-back" href="../../../api_doc/fixture/imports.html#potc.fixture.imports.ImportStatement">[docs]</a><span class="k">class</span> <span class="nc">ImportStatement</span><span class="p">(</span><span class="n">metaclass</span><span class="o">=</span><span class="n">ABCMeta</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Overview:</span>
<span class="sd">            Constructor of :class:`ImportStatement`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__uuid</span> <span class="o">=</span> <span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">uuid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Overview:</span>
<span class="sd">            UUID of the import statement, will be unique when generated.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__uuid</span>

    <span class="nd">@property</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">target</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Overview:</span>
<span class="sd">            Import target.</span>

<span class="sd">            - ``from aa import bb``  --&gt; bb.</span>
<span class="sd">            - ``from aa import bb as cc``  --&gt; cc.</span>
<span class="sd">            - ``import aa``  --&gt; aa.</span>
<span class="sd">            - ``import aa.bb``  --&gt; bb.</span>

<span class="sd">            Just seen target as the actual sign name of the imported object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>  <span class="c1"># pragma: no cover</span>

    <span class="nd">@property</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">key</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Overview:</span>
<span class="sd">            Key value of the import statement.</span>
<span class="sd">            Used for sorting.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>  <span class="c1"># pragma: no cover</span>

<div class="viewcode-block" id="ImportStatement._is_valid"><a class="viewcode-back" href="../../../api_doc/fixture/imports.html#potc.fixture.imports.ImportStatement._is_valid">[docs]</a>    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">_is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Overview:</span>
<span class="sd">            Whether this import statement is valid.</span>

<span class="sd">        Return:</span>
<span class="sd">            - valid (:obj:`bool`): Is valid or not.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>  <span class="c1"># pragma: no cover</span></div>

<div class="viewcode-block" id="ImportStatement._str"><a class="viewcode-back" href="../../../api_doc/fixture/imports.html#potc.fixture.imports.ImportStatement._str">[docs]</a>    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">_str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Overview:</span>
<span class="sd">            String format of this import statement.</span>

<span class="sd">        Returns:</span>
<span class="sd">            - str (:obj:`str`): String format.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>  <span class="c1"># pragma: no cover</span></div>

<div class="viewcode-block" id="ImportStatement._check_valid"><a class="viewcode-back" href="../../../api_doc/fixture/imports.html#potc.fixture.imports.ImportStatement._check_valid">[docs]</a>    <span class="k">def</span> <span class="nf">_check_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Overview:</span>
<span class="sd">            Check if this statement is valid.</span>
<span class="sd">            if not valid, raise ``ValueError``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_valid</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Invalid import statement - </span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_str</span><span class="p">())</span><span class="si">}</span><span class="s1">.&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImportStatement._with_check"><a class="viewcode-back" href="../../../api_doc/fixture/imports.html#potc.fixture.imports.ImportStatement._with_check">[docs]</a>    <span class="nd">@contextmanager</span>
    <span class="k">def</span> <span class="nf">_with_check</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Overview:</span>
<span class="sd">            Open a context, do some update and make sure the final statement is valid.</span>
<span class="sd">            If not, this statement will be rolled back, and all the updates will be ignored.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">_state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__getstate__</span><span class="p">()</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">yield</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_check_valid</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__setstate__</span><span class="p">(</span><span class="n">_state</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">err</span></div>

<div class="viewcode-block" id="ImportStatement.__getstate__"><a class="viewcode-back" href="../../../api_doc/fixture/imports.html#potc.fixture.imports.ImportStatement.__getstate__">[docs]</a>    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">__getstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Overview:</span>
<span class="sd">            Get value state of statement.</span>

<span class="sd">        Returns:</span>
<span class="sd">            - state: Value state.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__uuid</span></div>

<div class="viewcode-block" id="ImportStatement.__setstate__"><a class="viewcode-back" href="../../../api_doc/fixture/imports.html#potc.fixture.imports.ImportStatement.__setstate__">[docs]</a>    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">__setstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Overview:</span>
<span class="sd">            Set value state of statement.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__uuid</span> <span class="o">=</span> <span class="n">state</span></div>

<div class="viewcode-block" id="ImportStatement.__str__"><a class="viewcode-back" href="../../../api_doc/fixture/imports.html#potc.fixture.imports.ImportStatement.__str__">[docs]</a>    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Overview:</span>
<span class="sd">            Get string format, will check its validity before return.</span>

<span class="sd">        Returns:</span>
<span class="sd">            - str (:obj:`str`): String format.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_valid</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_str</span><span class="p">()</span></div>

<div class="viewcode-block" id="ImportStatement.__repr__"><a class="viewcode-back" href="../../../api_doc/fixture/imports.html#potc.fixture.imports.ImportStatement.__repr__">[docs]</a>    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Overview:</span>
<span class="sd">            Get representation format.</span>

<span class="sd">        Returns:</span>
<span class="sd">            - repr (:obj:`str`): Representation format.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;&lt;</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_str</span><span class="p">())</span><span class="si">}</span><span class="s1">&gt;&#39;</span></div></div>


<span class="n">_SEGMENT_PATTERN</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s1">&#39;[a-zA-Z0-9_]+&#39;</span><span class="p">)</span>
<span class="n">_LINK_PATTERN</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s1">&#39;[a-zA-Z0-9_]+(</span><span class="se">\\</span><span class="s1">.[a-zA-Z0-9_]+)*&#39;</span><span class="p">)</span>


<div class="viewcode-block" id="FromImport"><a class="viewcode-back" href="../../../api_doc/fixture/imports.html#potc.fixture.imports.FromImport">[docs]</a><span class="k">class</span> <span class="nc">FromImport</span><span class="p">(</span><span class="n">ImportStatement</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Overview:</span>
<span class="sd">        ``from xxx import yyy as zzz`` formatted import statement.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="FromImport.__init__"><a class="viewcode-back" href="../../../api_doc/fixture/imports.html#potc.fixture.imports.FromImport.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_from</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">_import</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">_as</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Overview:</span>
<span class="sd">            Constructor of ``FromImport``.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            - \_from (:obj:`str`): From source.</span>
<span class="sd">            - \_import (:obj:`Optional[str]`): Import item, default is ``None``.</span>
<span class="sd">            - \_as (:obj:`Optional[str]`): Alias name, default is ``None`` which means no alias.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ImportStatement</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__from</span> <span class="o">=</span> <span class="n">_from</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__import</span> <span class="o">=</span> <span class="n">_import</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__as</span> <span class="o">=</span> <span class="n">_as</span></div>

<div class="viewcode-block" id="FromImport.import_"><a class="viewcode-back" href="../../../api_doc/fixture/imports.html#potc.fixture.imports.FromImport.import_">[docs]</a>    <span class="k">def</span> <span class="nf">import_</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;FromImport&#39;</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Overview:</span>
<span class="sd">            Import from source.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            - obj_name (:obj:`str`): Import object name.</span>

<span class="sd">        Returns:</span>
<span class="sd">            - self: Self object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_with_check</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__import</span> <span class="o">=</span> <span class="n">obj_name</span>
            <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="FromImport.as_"><a class="viewcode-back" href="../../../api_doc/fixture/imports.html#potc.fixture.imports.FromImport.as_">[docs]</a>    <span class="k">def</span> <span class="nf">as_</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alias_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s1">&#39;FromImport&#39;</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Overview:</span>
<span class="sd">            Alias imported item.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            - alias_name (:obj:`Optional[str]`): Alias name.</span>

<span class="sd">        Returns:</span>
<span class="sd">            - self: Self object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_with_check</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__as</span> <span class="o">=</span> <span class="n">alias_name</span>
            <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="FromImport._is_valid"><a class="viewcode-back" href="../../../api_doc/fixture/imports.html#potc.fixture.imports.FromImport._is_valid">[docs]</a>    <span class="k">def</span> <span class="nf">_is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__from</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">__import</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__from</span> <span class="ow">or</span> <span class="n">_LINK_PATTERN</span><span class="o">.</span><span class="n">fullmatch</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__from</span><span class="p">))</span> <span class="ow">and</span> \
                   <span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__import</span> <span class="ow">or</span> <span class="n">_SEGMENT_PATTERN</span><span class="o">.</span><span class="n">fullmatch</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__import</span><span class="p">))</span> <span class="ow">and</span> \
                   <span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__as</span> <span class="ow">or</span> <span class="n">_SEGMENT_PATTERN</span><span class="o">.</span><span class="n">fullmatch</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__as</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="FromImport._str"><a class="viewcode-back" href="../../../api_doc/fixture/imports.html#potc.fixture.imports.FromImport._str">[docs]</a>    <span class="k">def</span> <span class="nf">_str</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__as</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;from </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">__from</span><span class="si">}</span><span class="s1"> import </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">__import</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;from </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">__from</span><span class="si">}</span><span class="s1"> import </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">__import</span><span class="si">}</span><span class="s1"> as </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">__as</span><span class="si">}</span><span class="s1">&#39;</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">target</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_valid</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__as</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__as</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__import</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">key</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_valid</span><span class="p">()</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">__from</span><span class="si">}</span><span class="s1">.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">__import</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">target</span>

    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">__from</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__import</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__as</span><span class="p">))</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">other</span> <span class="ow">is</span> <span class="bp">self</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="o">==</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__from</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__import</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__as</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">__from</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">__import</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">__as</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

<div class="viewcode-block" id="FromImport.__setstate__"><a class="viewcode-back" href="../../../api_doc/fixture/imports.html#potc.fixture.imports.FromImport.__setstate__">[docs]</a>    <span class="k">def</span> <span class="nf">__setstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__from</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__import</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__as</span><span class="p">,</span> <span class="n">_state</span> <span class="o">=</span> <span class="n">state</span>
        <span class="n">ImportStatement</span><span class="o">.</span><span class="n">__setstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_state</span><span class="p">)</span></div>

<div class="viewcode-block" id="FromImport.__getstate__"><a class="viewcode-back" href="../../../api_doc/fixture/imports.html#potc.fixture.imports.FromImport.__getstate__">[docs]</a>    <span class="k">def</span> <span class="nf">__getstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__from</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__import</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__as</span><span class="p">,</span> <span class="n">ImportStatement</span><span class="o">.</span><span class="n">__getstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="DirectImport"><a class="viewcode-back" href="../../../api_doc/fixture/imports.html#potc.fixture.imports.DirectImport">[docs]</a><span class="k">class</span> <span class="nc">DirectImport</span><span class="p">(</span><span class="n">ImportStatement</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Overview:</span>
<span class="sd">        ``import xxx as yyy`` formatted import statement.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="DirectImport.__init__"><a class="viewcode-back" href="../../../api_doc/fixture/imports.html#potc.fixture.imports.DirectImport.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_import</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">_as</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Overview:</span>
<span class="sd">            Constructor of ``DirectImport``.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            - \_import (:obj:`Optional[str]`): Import item, default is ``None``.</span>
<span class="sd">            - \_as (:obj:`Optional[str]`): Alias name, default is ``None`` which means no alias.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ImportStatement</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__import</span> <span class="o">=</span> <span class="n">_import</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__as</span> <span class="o">=</span> <span class="n">_as</span></div>

<div class="viewcode-block" id="DirectImport.as_"><a class="viewcode-back" href="../../../api_doc/fixture/imports.html#potc.fixture.imports.DirectImport.as_">[docs]</a>    <span class="k">def</span> <span class="nf">as_</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alias_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s1">&#39;DirectImport&#39;</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Overview:</span>
<span class="sd">            Alias imported item.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            - alias_name (:obj:`Optional[str]`): Alias name.</span>

<span class="sd">        Returns:</span>
<span class="sd">            - self: Self object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_with_check</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__as</span> <span class="o">=</span> <span class="n">alias_name</span>
            <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="DirectImport._is_valid"><a class="viewcode-back" href="../../../api_doc/fixture/imports.html#potc.fixture.imports.DirectImport._is_valid">[docs]</a>    <span class="k">def</span> <span class="nf">_is_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__import</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__import</span> <span class="ow">or</span> <span class="n">_LINK_PATTERN</span><span class="o">.</span><span class="n">fullmatch</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__import</span><span class="p">))</span> <span class="ow">and</span> \
                   <span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__as</span> <span class="ow">or</span> <span class="n">_SEGMENT_PATTERN</span><span class="o">.</span><span class="n">fullmatch</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__as</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="DirectImport._str"><a class="viewcode-back" href="../../../api_doc/fixture/imports.html#potc.fixture.imports.DirectImport._str">[docs]</a>    <span class="k">def</span> <span class="nf">_str</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__as</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;import </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">__import</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;import </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">__import</span><span class="si">}</span><span class="s1"> as </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">__as</span><span class="si">}</span><span class="s1">&#39;</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">target</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_valid</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__as</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__as</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__import</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">key</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_valid</span><span class="p">()</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">__import</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">target</span>

    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">__import</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__as</span><span class="p">))</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">other</span> <span class="ow">is</span> <span class="bp">self</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="o">==</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__import</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__as</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">__import</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">__as</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

<div class="viewcode-block" id="DirectImport.__setstate__"><a class="viewcode-back" href="../../../api_doc/fixture/imports.html#potc.fixture.imports.DirectImport.__setstate__">[docs]</a>    <span class="k">def</span> <span class="nf">__setstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__import</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__as</span><span class="p">,</span> <span class="n">_state</span> <span class="o">=</span> <span class="n">state</span>
        <span class="n">ImportStatement</span><span class="o">.</span><span class="n">__setstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_state</span><span class="p">)</span></div>

<div class="viewcode-block" id="DirectImport.__getstate__"><a class="viewcode-back" href="../../../api_doc/fixture/imports.html#potc.fixture.imports.DirectImport.__getstate__">[docs]</a>    <span class="k">def</span> <span class="nf">__getstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__import</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__as</span><span class="p">,</span> <span class="n">ImportStatement</span><span class="o">.</span><span class="n">__getstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div></div>


<span class="k">class</span> <span class="nc">_SelfFormImport</span><span class="p">(</span><span class="n">FromImport</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_from</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">_import</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">_as</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">_this</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">FromImport</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_from</span><span class="p">,</span> <span class="n">_import</span><span class="p">,</span> <span class="n">_as</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__this</span> <span class="o">=</span> <span class="n">_this</span>

    <span class="k">def</span> <span class="nf">import_</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;_SelfFormImport&#39;</span><span class="p">:</span>
        <span class="n">_return</span> <span class="o">=</span> <span class="n">FromImport</span><span class="o">.</span><span class="n">import_</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__this</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">as_</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alias_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s1">&#39;_SelfFormImport&#39;</span><span class="p">:</span>
        <span class="n">_return</span> <span class="o">=</span> <span class="n">FromImport</span><span class="o">.</span><span class="n">as_</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alias_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__this</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">__getstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">FromImport</span><span class="o">.</span><span class="n">__getstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">__this</span>

    <span class="k">def</span> <span class="nf">__setstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="n">_parent_state</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__this</span> <span class="o">=</span> <span class="n">state</span>
        <span class="n">FromImport</span><span class="o">.</span><span class="n">__setstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_parent_state</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">_SelfDirectImport</span><span class="p">(</span><span class="n">DirectImport</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_import</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">_as</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">_this</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">DirectImport</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_import</span><span class="p">,</span> <span class="n">_as</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_valid</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__this</span> <span class="o">=</span> <span class="n">_this</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__this</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">as_</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alias_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s1">&#39;_SelfDirectImport&#39;</span><span class="p">:</span>
        <span class="n">_return</span> <span class="o">=</span> <span class="n">DirectImport</span><span class="o">.</span><span class="n">as_</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alias_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__this</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">__getstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">DirectImport</span><span class="o">.</span><span class="n">__getstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">__this</span>

    <span class="k">def</span> <span class="nf">__setstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="n">_parent_state</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__this</span> <span class="o">=</span> <span class="n">state</span>
        <span class="n">DirectImport</span><span class="o">.</span><span class="n">__setstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_parent_state</span><span class="p">)</span>


<div class="viewcode-block" id="ImportPool"><a class="viewcode-back" href="../../../api_doc/fixture/imports.html#potc.fixture.imports.ImportPool">[docs]</a><span class="k">class</span> <span class="nc">ImportPool</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Overview:</span>
<span class="sd">        Pool of import statements.</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="ImportPool.__init__"><a class="viewcode-back" href="../../../api_doc/fixture/imports.html#potc.fixture.imports.ImportPool.__init__">[docs]</a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">imports</span><span class="p">:</span> <span class="n">ImportStatement</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Overview:</span>
<span class="sd">            Constructor of ``ImportPool``.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            - imports: Import statements.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__imports</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">imports</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__ids</span> <span class="o">=</span> <span class="p">{</span><span class="n">item</span><span class="o">.</span><span class="n">uuid</span><span class="p">:</span> <span class="n">item</span><span class="o">.</span><span class="n">target</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__imports</span><span class="p">}</span>
        <span class="n">_this</span> <span class="o">=</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="ImportPool.append"><a class="viewcode-back" href="../../../api_doc/fixture/imports.html#potc.fixture.imports.ImportPool.append">[docs]</a>    <span class="k">def</span> <span class="nf">append</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">import_</span><span class="p">:</span> <span class="n">ImportStatement</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Overview:</span>
<span class="sd">            Append new statement.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            - import\_: Import statement.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">import_</span><span class="o">.</span><span class="n">uuid</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ids</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__imports</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">import_</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__ids</span><span class="p">[</span><span class="n">import_</span><span class="o">.</span><span class="n">uuid</span><span class="p">]</span> <span class="o">=</span> <span class="n">import_</span><span class="o">.</span><span class="n">target</span></div>

<div class="viewcode-block" id="ImportPool.import_"><a class="viewcode-back" href="../../../api_doc/fixture/imports.html#potc.fixture.imports.ImportPool.import_">[docs]</a>    <span class="k">def</span> <span class="nf">import_</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_import</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">_SelfDirectImport</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Overview:</span>
<span class="sd">            Start a direct import statement.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            - \_import (:obj:`str`): Import item.</span>

<span class="sd">        Returns:</span>
<span class="sd">            - statement (:obj:`DirectImport`): Direct import statement.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">_SelfDirectImport</span><span class="p">(</span><span class="n">_import</span><span class="p">,</span> <span class="n">_this</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span></div>

<div class="viewcode-block" id="ImportPool.from_"><a class="viewcode-back" href="../../../api_doc/fixture/imports.html#potc.fixture.imports.ImportPool.from_">[docs]</a>    <span class="k">def</span> <span class="nf">from_</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_from</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">_SelfFormImport</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Overview:</span>
<span class="sd">            Start a from import statement.</span>

<span class="sd">        Arguments:</span>
<span class="sd">            - from (:obj:`str`): Import source.</span>

<span class="sd">        Returns:</span>
<span class="sd">            - statement (:obj:`FromImport`): From import statement.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">_SelfFormImport</span><span class="p">(</span><span class="n">_from</span><span class="p">,</span> <span class="n">_this</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">imports</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="s1">&#39;ImportStatement&#39;</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Overview:</span>
<span class="sd">            Get tuple of current import statements.</span>

<span class="sd">        Returns:</span>
<span class="sd">            - imports (:obj:`Tuple[&#39;ImportStatement&#39;, ...]`): Import statements.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__imports</span><span class="p">)</span>

<div class="viewcode-block" id="ImportPool.__getstate__"><a class="viewcode-back" href="../../../api_doc/fixture/imports.html#potc.fixture.imports.ImportPool.__getstate__">[docs]</a>    <span class="k">def</span> <span class="nf">__getstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Overview:</span>
<span class="sd">            Get value state of import pool.</span>

<span class="sd">        Returns:</span>
<span class="sd">            - state: Value state.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__imports</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ids</span></div>

<div class="viewcode-block" id="ImportPool.__setstate__"><a class="viewcode-back" href="../../../api_doc/fixture/imports.html#potc.fixture.imports.ImportPool.__setstate__">[docs]</a>    <span class="k">def</span> <span class="nf">__setstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Overview:</span>
<span class="sd">            Set value state of import pool.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__imports</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ids</span> <span class="o">=</span> <span class="n">state</span></div></div>
</pre></div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2022, HansBug

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  
    <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Other Versions</span>
    v: v0.0.3
    <span class="fa fa-caret-down"></span>
  </span>
        <div class="rst-other-versions">
                <dl>
                    <dt>Tags</dt>
                        <dd><a href="imports.html">v0.0.3</a></dd>
                        <dd><a href="../../../../v0.0.4/index.html">v0.0.4</a></dd>
                </dl>
                <dl>
                    <dt>Branches</dt>
                        <dd><a href="../../../../main/index.html">main</a></dd>
                </dl>
        </div>
    </div>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>